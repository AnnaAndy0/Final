{"ast":null,"code":"var _jsxFileName = \"/Users/anna/final/frontend/pages/login.js\";\nvar __jsx = React.createElement;\nimport axios from \"axios\";\nimport React, { useState, useContext } from \"react\";\nimport Card from \"../../Card\";\nimport { AuthContext } from \"../../AuthContext\";\nimport GoogleLogin from \"react-google-login\";\nimport { Button } from \"react-bootstrap\";\nimport styles from './Login.module.css';\n\nfunction Login() {\n  const {\n    0: show,\n    1: setShow\n  } = useState(true);\n  const {\n    0: status,\n    1: setStatus\n  } = useState(\"\");\n  const {\n    0: email,\n    1: setEmail\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: button,\n    1: setButton\n  } = useState(true);\n  const {\n    user,\n    setUser\n  } = useContext(AuthContext);\n  const baseUrl = \"https://bankbackend101.herokuapp.com/\";\n\n  async function googleSuccess(res) {\n    const token = await (res === null || res === void 0 ? void 0 : res.tokenId);\n    await axios.get(baseUrl + `users/google/${token}`).then(response => {\n      setUser(response.data.user);\n      localStorage.setItem(\"token\", response.data.token);\n      localStorage.setItem(\"user\", JSON.stringify(response.data.user));\n      setShow(false);\n    }).catch(err => console.log(err));\n  }\n\n  function googleFailure(error) {\n    console.log('error:', error);\n    console.log(\"Google sign in was unsuccessful, please try again.\");\n  }\n\n  function validate(field, label) {\n    if (!field) {\n      setStatus(\"Error: \" + label);\n      setTimeout(() => setStatus(\"\"), 3000);\n      return false;\n    } else if (password.length < 8) {\n      setStatus(label + \"must be 8 characters or longer\");\n      setTimeout(() => setStatus(\"\"), 3000);\n    }\n\n    return true;\n  }\n\n  async function handleCreate() {\n    console.log(email, password);\n    let data = {\n      email: email,\n      password: password\n    };\n    if (!validate(email, \"email\")) return;\n    if (!validate(password, \"password\")) return;\n    if (password.length < 8) return;\n\n    if (validate(email, \"email\") && validate(password, \"password\")) {\n      await axios.post(baseUrl + \"users/login\", data).then(response => {\n        if (response.data.ok === true) {\n          setUser(response.data.user);\n          localStorage.setItem(\"token\", response.data.token);\n          localStorage.setItem(\"user\", JSON.stringify(response.data.user));\n          setShow(false);\n        } else {\n          setStatus(response.data.message);\n          setTimeout(() => setStatus(\"\"), 3000);\n        }\n      }).catch(error => console.log(error));\n    }\n  }\n\n  console.log(user);\n  return __jsx(React.Fragment, null, __jsx(Card, {\n    header: \"Login\",\n    status: status,\n    body: show ? __jsx(React.Fragment, null, \"Email address\", __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }), __jsx(\"input\", {\n      type: \"input\",\n      className: \"form-control\",\n      id: \"email\",\n      placeholder: \"Enter email\",\n      value: email,\n      onChange: e => {\n        setEmail(e.currentTarget.value);\n        setButton(false);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }), \"Password\", __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }), __jsx(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"password\",\n      placeholder: \"Enter password\",\n      value: password,\n      onChange: e => {\n        setPassword(e.currentTarget.value);\n        setButton(false);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    }), __jsx(\"button\", {\n      type: \"submit\",\n      id: \"submit\",\n      className: styles.submitButton,\n      disabled: button,\n      onClick: handleCreate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, \"Login\"), __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }), __jsx(GoogleLogin, {\n      clientId: \"1037994517915-866vklg7sl4srf912sov3dig06d58mgm.apps.googleusercontent.com\",\n      render: renderProps => __jsx(\"button\", {\n        className: styles.googleButton,\n        onClick: renderProps.onClick,\n        disabled: renderProps.disabled,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }\n      }, __jsx(\"img\", {\n        className: \"googleimg\",\n        src: \"https://img.icons8.com/clouds/100/000000/google-logo.png\",\n        alt: \"google\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 18\n        }\n      }), \" Google Sign In\"),\n      onSuccess: googleSuccess,\n      onFailure: googleFailure,\n      cookiePolicy: \"single_host_origin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    })) : __jsx(React.Fragment, null, __jsx(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }, \"Successful Login\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }));\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/anna/final/frontend/pages/login.js"],"names":["axios","React","useState","useContext","Card","AuthContext","GoogleLogin","Button","styles","Login","show","setShow","status","setStatus","email","setEmail","password","setPassword","button","setButton","user","setUser","baseUrl","googleSuccess","res","token","tokenId","get","then","response","data","localStorage","setItem","JSON","stringify","catch","err","console","log","googleFailure","error","validate","field","label","setTimeout","length","handleCreate","post","ok","message","e","currentTarget","value","submitButton","renderProps","googleButton","onClick","disabled"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport Card from \"../../Card\";\r\nimport { AuthContext } from \"../../AuthContext\";\r\nimport GoogleLogin from \"react-google-login\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport styles from'./Login.module.css';\r\n\r\n\r\n\r\nfunction Login() {\r\n  const [show, setShow] = useState(true);\r\n  const [status, setStatus] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [button, setButton] = useState(true);\r\n  const { user, setUser } = useContext(AuthContext);\r\n  const baseUrl = \"https://bankbackend101.herokuapp.com/\"\r\n\r\n  async function googleSuccess(res) {\r\n   const token  = await res?.tokenId;\r\n    await axios.get(baseUrl + `users/google/${token}`)\r\n    .then( response=>{\r\n      setUser(response.data.user)\r\n      localStorage.setItem(\"token\", response.data.token);\r\n      localStorage.setItem(\"user\", JSON.stringify(response.data.user))\r\n      setShow(false);\r\n    })\r\n    .catch(err => console.log(err));\r\n  }\r\n  function googleFailure(error) {\r\n    console.log('error:',error)\r\n    console.log(\"Google sign in was unsuccessful, please try again.\")\r\n  }\r\n\r\n  function validate(field, label) {\r\n    if (!field) {\r\n      setStatus(\"Error: \" + label);\r\n      setTimeout(() => setStatus(\"\"), 3000);\r\n      return false;\r\n    } else if (password.length < 8) {\r\n      setStatus(label + \"must be 8 characters or longer\");\r\n      setTimeout(() => setStatus(\"\"), 3000);\r\n    }\r\n    return true;\r\n  }\r\n  async function handleCreate() {\r\n    console.log(email, password);\r\n    let data = { email: email, password: password };\r\n    if (!validate(email, \"email\")) return;\r\n    if (!validate(password, \"password\")) return;\r\n    if (password.length < 8) return;\r\n    if (validate(email, \"email\") && validate(password, \"password\")) {\r\n      await axios\r\n        .post(baseUrl + \"users/login\", data)\r\n        .then((response) => {\r\n          if (response.data.ok === true) {\r\n            setUser(response.data.user)\r\n            localStorage.setItem(\"token\", response.data.token);\r\n            localStorage.setItem(\"user\", JSON.stringify(response.data.user))\r\n            setShow(false);\r\n          } else {\r\n            setStatus(response.data.message);\r\n            setTimeout(() => setStatus(\"\"), 3000);\r\n          }\r\n        })\r\n        .catch((error) => console.log(error));\r\n    }\r\n  }\r\n  console.log(user);\r\n  return (\r\n    <>\r\n    \r\n    <Card\r\n      header=\"Login\"\r\n      status={status}\r\n      body={\r\n        show ? (\r\n          <>\r\n            Email address\r\n            <br />\r\n            <input\r\n              type=\"input\"\r\n              className=\"form-control\"\r\n              id=\"email\"\r\n              placeholder=\"Enter email\"\r\n              value={email}\r\n              onChange={(e) => {\r\n                setEmail(e.currentTarget.value);\r\n                setButton(false);\r\n              }}\r\n            />\r\n            <br />\r\n            Password\r\n            <br />\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              id=\"password\"\r\n              placeholder=\"Enter password\"\r\n              value={password}\r\n              onChange={(e) => {\r\n                setPassword(e.currentTarget.value);\r\n                setButton(false);\r\n              }}\r\n            />\r\n            <br />\r\n            <button\r\n              type=\"submit\"\r\n              id=\"submit\"\r\n              className={styles.submitButton}\r\n              disabled={button}\r\n              onClick={handleCreate}\r\n            >\r\n              Login\r\n            </button>\r\n            <br />\r\n            <GoogleLogin\r\n              clientId=\"1037994517915-866vklg7sl4srf912sov3dig06d58mgm.apps.googleusercontent.com\"\r\n              render={(renderProps) => (\r\n                <button\r\n                  className={styles.googleButton}\r\n                  onClick={renderProps.onClick}\r\n                  disabled={renderProps.disabled}\r\n                ><img className=\"googleimg\" src=\"https://img.icons8.com/clouds/100/000000/google-logo.png\" alt=\"google\"/> Google Sign In</button>\r\n              )}\r\n              onSuccess={googleSuccess}\r\n              onFailure={googleFailure}\r\n              cookiePolicy=\"single_host_origin\"\r\n            />\r\n          </>\r\n        ) : (\r\n          <>\r\n            <h5>Successful Login</h5>\r\n          </>\r\n        )\r\n      }\r\n    />\r\n    </>\r\n  );\r\n}\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}